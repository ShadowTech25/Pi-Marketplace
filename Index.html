<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pi Local Services – Canada</title>
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
    header { background: #6c2bd9; color: #fff; padding: 15px; text-align: center; }
    .container { padding: 15px; }
    .card { background: #fff; padding: 15px; margin-bottom: 10px; border-radius: 6px; }
    button { padding: 10px; background: #6c2bd9; color: #fff; border: none; border-radius: 4px; }
    input, textarea, select { width: 100%; padding: 8px; margin-bottom: 10px; }
  </style>
</head>
<body>
<header>
  <h2>Pi Local Services – Canada</h2>
  <button onclick="piLogin()">Login with Pi</button>
</header>
<div class="container">
  <h3>Create Listing</h3>
  <input id="title" placeholder="Title" />
  <textarea id="description" placeholder="Description"></textarea>
  <input id="price" type="number" placeholder="Price (Pi)" />
  <select id="category">
    <option>Services</option>
    <option>Labor / Trades</option>
    <option>Tools & Equipment</option>
    <option>Digital Services</option>
    <option>Misc</option>
  </select>
  <input id="city" placeholder="City" />
  <button onclick="createListing()">Post Listing</button>  <h3>Listings</h3>
  <div id="listings"></div>
</div>
<footer style="text-align:center; font-size:12px; padding:10px;">
  This app is a peer-to-peer classified listing platform priced in Pi. No financial or investment services provided.
</footer>
<script>
  Pi.init({ version: "2.0" });const firebaseConfig = { apiKey: "YOUR_API_KEY", authDomain: "YOUR_PROJECT.firebaseapp.com", projectId: "YOUR_PROJECT_ID", };

firebase.initializeApp(firebaseConfig); const db = firebase.firestore();

let currentUser = null;

async function piLogin() { const auth = await Pi.authenticate(["username"], () => {}); currentUser = auth.user.username; alert("Logged in as " + currentUser); loadListings(); }

function createListing() { if (!currentUser) return alert("Login first"); db.collection("listings").add({ title: title.value, description: description.value, price_pi: Number(price.value), category: category.value, city: city.value, country: "Canada", posted_by: currentUser, created_at: new Date(), active: true }).then(loadListings); }

function loadListings() { listings.innerHTML = ""; db.collection("listings") .where("country", "==", "Canada") .orderBy("created_at", "desc") .get() .then(snapshot => { snapshot.forEach(doc => { const d = doc.data(); listings.innerHTML +=  <div class="card"> <strong>${d.title}</strong><br/> ${d.description}<br/> <b>${d.price_pi} Pi</b><br/> ${d.city} – ${d.category}<br/> Posted by: ${d.posted_by} </div>; }); }); } </script>

</body>
</html>
